# =====================================================
# MCP Analytics Server - Environment Variables
# =====================================================
# Copy this file to .env and fill in your values
# Usage: cp .env.example .env
# =====================================================

# =====================================================
# Environment
# =====================================================
ENVIRONMENT=development  # development | staging | production
DEBUG=true
LOG_LEVEL=INFO  # DEBUG | INFO | WARNING | ERROR

# =====================================================
# Database - Metadata Store
# =====================================================
# Local development
METADATA_DATABASE_URL=postgresql://mcp_admin:dev_password_123@localhost:5433/metadata_db

# Production (Render/Azure)
# METADATA_DATABASE_URL=postgresql://user:password@host:port/metadata_db

# =====================================================
# Redis - Cache & Pub/Sub
# =====================================================
REDIS_URL=redis://:dev_redis_password@localhost:6379/0

# Production
# REDIS_URL=redis://:your_password@your-redis-host:6379/0

# =====================================================
# Security & Encryption
# =====================================================
# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
ENCRYPTION_KEY=your-fernet-encryption-key-here

# Generate with: openssl rand -hex 32
SECRET_KEY=your-secret-key-for-sessions-here

# =====================================================
# LLM Configuration
# =====================================================
# OpenAI API Key (required for Phase 2 - metadata generation)
OPENAI_API_KEY=sk-your-openai-api-key-here

# LLM Model (default: gpt-4o-mini)
LLM_MODEL=gpt-4o-mini
LLM_TEMPERATURE=0.3
LLM_MAX_TOKENS=4000

# =====================================================
# Application Settings
# =====================================================
APP_NAME="MCP Analytics Server"
APP_VERSION=2.0.0

# Server
HOST=0.0.0.0
PORT=8000

# CORS (comma-separated origins)
CORS_ORIGINS=http://localhost:3000,http://localhost:8000

# =====================================================
# Query Limits
# =====================================================
MAX_RAW_ROWS=5
MAX_AGGREGATED_ROWS=1000
MAX_PARALLEL_QUERIES=30
QUERY_TIMEOUT_SECONDS=60

# =====================================================
# Celery Configuration
# =====================================================
CELERY_BROKER_URL=redis://:dev_redis_password@localhost:6379/0
CELERY_RESULT_BACKEND=redis://:dev_redis_password@localhost:6379/1
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=json
CELERY_TIMEZONE=UTC

# =====================================================
# Cache TTL (seconds)
# =====================================================
CACHE_TTL_LEVEL_0=3600   # Global context: 1 hour
CACHE_TTL_LEVEL_1=1800   # Dataset summaries: 30 min
CACHE_TTL_LEVEL_2=900    # Schema details: 15 min
CACHE_TTL_LEVEL_3=300    # Full schema + samples: 5 min

# =====================================================
# Monitoring & Logging
# =====================================================
# Query log retention (days)
QUERY_LOG_RETENTION_DAYS=90

# Enable performance tracking
ENABLE_PERFORMANCE_TRACKING=true

# =====================================================
# Development Only
# =====================================================
# Auto-reload on code changes
RELOAD=true

# Enable SQL query logging
LOG_SQL_QUERIES=false

# =====================================================
# Production Only (Render/Azure)
# =====================================================
# External database URLs (set in Render dashboard)
# DATABASE_URL=postgresql://...  (Render auto-sets this)

# Sentry (error tracking - optional)
# SENTRY_DSN=https://your-sentry-dsn-here

# =====================================================
# Feature Flags
# =====================================================
# Enable/disable features for phased rollout
ENABLE_MULTI_DATASET=false    # Phase 2
ENABLE_LLM_METADATA=false     # Phase 2
ENABLE_UI=false               # Phase 3
ENABLE_PARALLEL_QUERIES=false # Phase 4
ENABLE_QUERY_LOGS=false       # Phase 5
